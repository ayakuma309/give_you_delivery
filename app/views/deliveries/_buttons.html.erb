<% if logged_in? %>
  <% if current_user.mine?(delivery) %>
    <div class="text-center my-3">
      <input type="button" class= "btn btn-primary my-3" value="URLコピー" id="btnShowBox" onclick="copyUrl()">
    </div>
    <p id="temporaryBox" style="display: none;" class= "text-center text-accent">
      URLはコピーされました<br>
    </p>
  <% else %>
    <div class="text-center my-3">
      <%= render 'bookmarks/bookmark_button', delivery: delivery %>
    </div>
  <% end %>
<% end %>


<script>
  function copyUrl() {
    var url = location.href;
    navigator.clipboard.writeText(url);
    document.getElementById("temporaryBox").style.display = "block"; // ボックスを表示
    timerId = setTimeout( closeBox , 3000 ); // タイマーを開始
    document.getElementById("btnShowBox").disabled = true; // 表示用ボタンを無効化
  }
  function closeBox() {
   document.getElementById("temporaryBox").style.display = "none"; // ボックスを消す
   document.getElementById("btnShowBox").disabled = false; // 表示用ボタンを有効化
}

</script>
